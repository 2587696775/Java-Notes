# Java位运算

## 原码 反码 补码

int类型数值是4个字节，每个字节有8位。对于一个 int 或者其它整数类型如 （long）的数值而言还要注意的是，它的最高位是符号位。

-   最高位为0表示正数
-   最高位为1表示负数

### **原码**

将一个数字转换成二进制就是这个数值的原码。

```java
int a = 5; //原码  0000 0000 0000 0101
int b = -3;  //原码  1000 0000 0000 0011
```

### **反码**

分为两种情况：正数和负数

-   正数的反码就是原码
-   负数的反码就是在原码的基础上，符号位不变，其他位取反

```java
5 的原码：0000 0000 0000 0101

-3 的原码：1000 0000 0000 0011
-3 的反码：1111 1111 1111 1100
```

### 补码

也是分为两种情况：正数和负数

-   正数的补码就是原码
-   负数的补码是在反码的基础上末位加1

```java
5 的补码：0000 0000 0000 0101

-3 的反码：1111 1111 1111 1100
-3 的补码：1111 1111 1111 1101
```

**计算机在进行数值运算的时候，是通过补码表示每个数值的**

比如

```java
5 - 3 = 5 + ( -3 )
相当于 0000 0000 0000 0101 + 1111 1111 1111 1101
    = 1 0000 0000 0000 0010
```

最后的结果是1 0000 0000 0000 0010 这样的二进制，由于 int 类型只有 4 byte，所以最高位产生了溢出，进位 1 被丢弃。结果就变成了 0010 也就是 2，5 - 3 = 2 没有毛病。

![这里写图片描述](F:\编程教程\个人笔记\图片\计算机基础\5-3运算过程)

## 按位与(&)

&为双目运算符，运算规则为：如果两个整型数据的a、b的对应位都是1，则结果位才是1，否则为0。

## 按位或(|)

|为双目运算符，两个操作数对应位只要有一个为1，结果位就是1，否则为0

## 按位取反(~)

~为单目运算符，将操作数二进制的1改为0，0改为1

## 按位异或(^)

^为双目运算符，两个操作数对应位相同(同时为1或者同时为0)时，结果位为0，否则为1

## 移位操作

### **左移(<<)**

**丢弃最高位，0补最低位**

左移就是将运算符左边的操作数的二进制数按照运算符右边的指定位数向左移动，右边补0

### **右移(>>)**

**符号位不变，左边补上符号位**

右移如果最高位是0，右移后左边的空位就补上0；如果最到位是1，左边的空位就补上1

### **无符号右移(>>>)**

右移时，无论最高位是0还是1，左侧被移空的高位都补上0

### 注意

-   double，float不能进行位移操作
-   byte，short移位前会先转换为int类型(32位)，再进行位移
-   移位数大于数据类型的位数时，会先对移位数取余再移位（int类型大于等于32位，long类型大于等于64位）

### **技巧**

-   一个数左移n位，相当于这个数乘以2^n^
-   一个数右移n位，相当于这个数除以2^n^

### 举例说明移位操作

#### 左移(<<)

![img](F:\编程教程\个人笔记\图片\计算机基础\十进制的733183670.jpg)

733183670 << 1，左移1位：

![img](F:\编程教程\个人笔记\图片\计算机基础\733183670左移1位.jpg)

733183670 << 8，左移8位看一下：

![img](F:\编程教程\个人笔记\图片\计算机基础\733183670左移8位.jpg)

移动8位首位变成了1，就变成了负数，在左移使用中要考虑正负改变的情况。

##### **左移位数超过数据类型的位数时的情况**

-   当int类型进行左移操作时，**左移位数大于等于32位操作时，会先求余（%）后再进行左移操作。**也就是说左移32位相当于不进行移位操作，左移40位相当于左移8位（40%32=8）。

-   当long类型进行左移操作时，long类型在二进制中的体现是64位的，因此求余操作的基数也变成了64，也就是说左移64位相当于没有移位，左移72位相当于左移8位（72%64=8）。

#### 右移(>>)

![img](F:\编程教程\个人笔记\图片\计算机基础\十进制的733183670.jpg)

733183670 >> 1，右移1位：

![img](F:\编程教程\个人笔记\图片\计算机基础\733183670右移1位.jpg)

733183670 >> 8，右移8位看一下：

![img](F:\编程教程\个人笔记\图片\计算机基础\733183670右移8位.jpg)

#### 无符号右移(>>>)

负数通过此移位运算符能移位成正数

![img](F:\编程教程\个人笔记\图片\计算机基础\-733183670无符号右移8位.jpg)

